# Python笔记九 （正则表达式）

## 1. 基本匹配规则

* `\d` 匹配一个数字
* `\w` 匹配一个字母
* `\s` 匹配一个空格或者Tab
* 特殊字符需要转义，例如 `\*` 、`\\`
* `.` 可以匹配任意字符
* `*` 表示任意个字符（包括0个）
  
-----

* `+` 表示至少一个字符
* `?` 表示 `0` 个或 `1` 个字符
* `{n}` 表示 `n` 个字符
* `{n,m}` 表示 `n-m` 个字符

## 2. 精确匹配规则

* `[]` 表示范围
* `^` 表示行的开头
* `$` 表示行的结束
* `|` 表示或
* `()` 可以进行分组

`[0-9a-zA-Z\_]` 可以匹配一个数字、字母或者下划线；

`[0-9a-zA-Z\_]+` 可以匹配至少由一个数字、字母或者下划线组成的字符串，比如 `'a100'` ，`'0_Z'` ，`'Py3000'` 等等；

`[a-zA-Z\_][0-9a-zA-Z\_]*` 可以匹配由字母或下划线开头，后接任意个由一个数字、字母或者下划线组成的字符串，也就是Python合法的变量；

`[a-zA-Z\_][0-9a-zA-Z\_]{0, 19}` 更精确地限制了变量的长度是1-20个字符（前面1个字符+后面最多19个字符）。

## 3. re模块

判断是否匹配，使用 `match()` 方法，如果匹配成功，返回一个Match对象，否则返回None

python的字符串里面包含转义字符，在正则表达式里面使用 `r''` 关闭转义

```python
test = '待匹配的字符串'
if re.match(r'正则表达式'， test):
    print('ok')
else:
    print('failed')
```

## 4. 使用正则表达式来切分字符串

```python
>>> re.split(r'[\s\,\;]+', 'a,b;;c  d')
['a', 'b', 'c', 'd']
```

使用 `()` 可以进行分组，同时可以调用 `group()` 方法提取出来， `group(0)` 表示原始字符串、`group(1)` 表示字串1...

```python
>>> m = re.match(r'^(\d{3})-(\d{3,8})$', '010-12345')
>>> m
<_sre.SRE_Match object; span=(0, 9), match='010-12345'>
>>> m.group(0)
'010-12345'
>>> m.group(1)
'010'
>>> m.group(2)
'12345'
```

## 5. 贪婪匹配

正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。加个 `?` 就可以让 `\d+` 采用非贪婪匹配

```python
>>> re.match(r'^(\d+)(0*)$', '102300').groups()
('102300', '')

>>> re.match(r'^(\d+?)(0*)$', '102300').groups()
('1023', '00')
```

使用 `groups()` 返回一个 `List` ，包含所有分组内容

## 6. 编译正则表达式

```python
>>> import re

# 编译:
>>> re_telephone = re.compile(r'^(\d{3})-(\d{3,8})$')

# 使用：
>>> re_telephone.match('010-12345').groups()
('010', '12345')

>>> re_telephone.match('010-8086').groups()
('010', '8086')
```

## 7. 匹配邮箱正则表达式

```python
r'^([\w\d]+)([\w\d\-\.]+)@([\w\d\.]+)$'
```
